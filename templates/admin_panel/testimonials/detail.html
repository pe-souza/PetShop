{% extends 'admin_panel/base_admin.html' %}

{% block title %}Depoimento{% endblock %}
{% block page_title %}Detalhes do Depoimento{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <div class="detail-header">
            <div class="detail-avatar">{{ testimonial.author_name|slice:":1"|upper }}</div>
            <div class="detail-info">
                <h2>{{ testimonial.author_name }}</h2>
                <span class="badge {% if testimonial.status == 'approved' %}badge-success{% elif testimonial.status == 'pending' %}badge-warning{% else %}badge-danger{% endif %}">
                    {{ testimonial.get_status_display }}
                </span>
            </div>
        </div>
        
        <div class="detail-content">
            <div class="detail-row">
                <span class="detail-label">Nota:</span>
                <span class="rating-large">
                    {% for i in "12345" %}
                        {% if forloop.counter <= testimonial.rating %}⭐{% else %}☆{% endif %}
                    {% endfor %}
                </span>
            </div>
            
            <div class="detail-row">
                <span class="detail-label">Serviço:</span>
                <span>{{ testimonial.service.name|default:"Não especificado" }}</span>
            </div>
            
            <div class="detail-row">
                <span class="detail-label">Data:</span>
                <span>{{ testimonial.created_at|date:"d/m/Y às H:i" }}</span>
            </div>
            
            <div class="detail-row full-width">
                <span class="detail-label">Comentário:</span>
                <p class="comment-text">{{ testimonial.comment }}</p>
            </div>
        </div>
        
        <div class="detail-actions">
            <a href="{% url 'admin_panel:testimonials_list' %}" class="btn btn-secondary">← Voltar</a>
            {% if testimonial.status != 'approved' %}
            <a href="{% url 'admin_panel:testimonials_approve' testimonial.pk %}" class="btn btn-success">Aprovar</a>
            {% endif %}
            {% if testimonial.status != 'rejected' %}
            <a href="{% url 'admin_panel:testimonials_reject' testimonial.pk %}" class="btn btn-warning">Reprovar</a>
            {% endif %}
            <a href="{% url 'admin_panel:testimonials_delete' testimonial.pk %}" class="btn btn-danger">Excluir</a>
        </div>
    </div>
</div>
{% endblock %}
