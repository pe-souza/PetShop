{% extends 'admin_panel/base_admin.html' %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-info">
            <span class="stat-value">{{ total_clientes|default:0 }}</span>
            <span class="stat-label">Clientes</span>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ğŸ•</div>
        <div class="stat-info">
            <span class="stat-value">{{ total_pets|default:0 }}</span>
            <span class="stat-label">Pets</span>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-info">
            <span class="stat-value">{{ agendamentos_hoje|default:0 }}</span>
            <span class="stat-label">Agendamentos Hoje</span>
        </div>
    </div>
    <div class="stat-card highlight">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-info">
            <span class="stat-value">R$ {{ faturamento_mes|floatformat:2|default:"0,00" }}</span>
            <span class="stat-label">Faturamento MÃªs</span>
        </div>
    </div>
</div>

<div class="dashboard-grid">
    <div class="card">
        <div class="card-header">
            <h3>PrÃ³ximos Agendamentos</h3>
            <a href="{% url 'admin_panel:agenda' %}" class="link">Ver Agenda â†’</a>
        </div>
        <div class="card-body">
            {% if proximos_agendamentos %}
            <table class="table">
                <thead>
                    <tr>
                        <th>Data/Hora</th>
                        <th>Cliente</th>
                        <th>Pet</th>
                        <th>ServiÃ§o</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for a in proximos_agendamentos %}
                    <tr>
                        <td>{{ a.data|date:"d/m" }} {{ a.hora_inicio|time:"H:i" }}</td>
                        <td>{{ a.cliente.nome }}</td>
                        <td>{{ a.pet.nome }}</td>
                        <td>{{ a.servico.name }}</td>
                        <td><span class="badge badge-{{ a.status }}">{{ a.get_status_display }}</span></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="empty-state">Nenhum agendamento prÃ³ximo</p>
            {% endif %}
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h3>ServiÃ§os Populares</h3>
        </div>
        <div class="card-body">
            {% if servicos_populares %}
            <ul class="list">
                {% for s in servicos_populares %}
                <li class="list-item">
                    <span class="item-name">{{ s.servico__name }}</span>
                    <span class="badge badge-success">{{ s.total }} atendimentos</span>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p class="empty-state">Nenhum serviÃ§o realizado ainda</p>
            {% endif %}
        </div>
    </div>
</div>

<div class="quick-actions">
    <h3>AÃ§Ãµes RÃ¡pidas</h3>
    <div class="actions-grid">
        <a href="{% url 'admin_panel:agendamentos_create' %}" class="action-card">
            <span class="action-icon">ğŸ“…</span>
            <span>Novo Agendamento</span>
        </a>
        <a href="{% url 'admin_panel:clientes_create' %}" class="action-card">
            <span class="action-icon">ğŸ‘¤</span>
            <span>Novo Cliente</span>
        </a>
        <a href="{% url 'admin_panel:pets_create' %}" class="action-card">
            <span class="action-icon">ğŸ¾</span>
            <span>Novo Pet</span>
        </a>
        <a href="{% url 'admin_panel:services_create' %}" class="action-card">
            <span class="action-icon">âœ‚ï¸</span>
            <span>Novo ServiÃ§o</span>
        </a>
    </div>
</div>
{% endblock %}
